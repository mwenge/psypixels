\begin{figure}[H]
    \centering
    \begin{adjustbox}{width=10.5cm,center}
      \includegraphics[width=10cm]{src/pulsewidth/pattern0-45.png}%
    \end{adjustbox}
    \begin{adjustbox}{width=10.5cm,margin=0cm -2cm}
      \includegraphics[width=10cm]{src/pulsewidth/pattern1-45.png}%
    \end{adjustbox}
    \caption{Effect of low and high values for Pulse Width}
\end{figure}
\clearpage
\section*{pulse width} 
\label{sec:pulse_width}
\lstset{style=6502Style}
\lstset{ 
   aboveskip=5pt,
   belowskip=0pt,
}

\begin{definition}[Jeffrey Says]
\setlength{\intextsep}{0pt}%
\setlength{\columnsep}{3pt}%
\begin{wrapfigure}{l}{0.12\textwidth}
\includegraphics[width=\linewidth]{src/callout/psych.png} 
\end{wrapfigure}
\small
\textbf{O to activate:} Sets the length of the pulses in a
pulsed stream output. Donâ€™t worry about what that means - just get
in there and mess with it.
\\
\\
\end{definition}


\clearpage
\textbf{Lines 1189-1231. \icode{\textbf{MaybeOPressed}}} 
\begin{lstlisting}[caption=From \icode{CheckKeyboardInput}.]
MaybeOPressed   
  CMP #KEY_O ; O pressed.
  BNE MaybeAsteriskPressed

  ; O pressed.
  LDA #PULSE_WIDTH
  STA currentVariableMode
  RTS 
\end{lstlisting}
\textbf{Lines 1189-1231. \icode{\textbf{UpdateVariableDisplay}}} 
\begin{lstlisting}[caption=From \icode{CheckKeyboardInputForActiveVariable}. Pressing the < and > keys increments and
decrements the value in presetValueArray pointed to by \icode{X}\, i.e. \icode{currentVariableMode}.]
UpdateVariableDisplay   
  LDA #>SCREEN_RAM + $03D0
  STA colorBarColorRamHiPtr
  LDA #<SCREEN_RAM + $03D0
  STA colorBarColorRamLoPtr

  LDX currentVariableMode
  LDA lastKeyPressed
  CMP #$2C ; > pressed?
  BNE MaybeLeftArrowPressed

  ; > pressed, increase the value bar and write
  ; it to the approiate place in presetValueArray
  INC presetValueArray,X
  LDA presetValueArray,X
  ; Make sure we don't exceed the max value.
  CMP maxValueForPresetValueArray,X
  BNE MaybeInColorMode
  DEC presetValueArray,X
  JMP MaybeInColorMode
\end{lstlisting}

\textbf{Lines 1189-1231. \icode{\textbf{presetValueArray}}} 
\begin{lstlisting}[basicstyle=\ttfamily\scriptsize,caption=From \icode{ActivateSequencer}.]
presetValueArray
unusedPresetByte        .BYTE $00
smoothingDelay          .BYTE $0C
cursorWidth             .BYTE $02
bufferLength            .BYTE $1F
pulseWidth              .BYTE $01; <-- Pulse Width is here at position $04.
indexForColorBarDisplay .BYTE $01
lineWidth               .BYTE $07
sequencerWidth          .BYTE $04 
pulseWidth              .BYTE $01
baseLevel               .BYTE $07
presetColorValuesArray  .BYTE BLACK,BLUE,RED,PURPLE,GREEN,CYAN,YELLOW,WHITE
trackingActivated       .BYTE $FF
\end{lstlisting}

\clearpage

\textbf{Lines 1189-1231. \icode{\textbf{DisplayPresetMessage}}:} 
\clearpage


\clearpage
\textbf{Lines 1189-1231. \icode{\textbf{MainInterruptHandler}}} 
\begin{lstlisting}[caption=From \icode{MainInterruptHandler}.]
DecrementPulseWidthCounter   
        LDA currentPulseWidth
        BEQ DecrementPulseSpeedCounter
        DEC currentPulseWidth
        BEQ DecrementPulseSpeedCounter
        JMP UpdatePixelBuffersForPattern

DecrementPulseSpeedCounter   
        DEC currentPulseSpeedCounter
        BEQ RefreshPulseSpeed
        JMP DrawCursorAndReturnFromInterrupt

RefreshPulseSpeed   
        LDA pulseSpeed
        STA currentPulseSpeedCounter
        LDA pulseWidth
        STA currentPulseWidth

        ; Finally, update the pixel buffers with a byte
        ; each for the current pattern.        
UpdatePixelBuffersForPattern    
        INC currentStepCount
        LDA currentStepCount
        CMP bufferLength
        BNE UpdateBaseLevelArray

        LDA #$00
        STA currentStepCount

\end{lstlisting}
\clearpage

\textbf{Lines 1189-1231. \icode{\textbf{DisplayPresetMessage}}:} 
\clearpage
